[< 前一篇]()

# Parallax Scrolling

在之前，我们已经在静态的场景里创建了主角和一些敌人，有点无聊了，是时候加强一下背景和场景了。在前15年里，你会发现每个单机2D游戏都是“parallax scrolling (视差卷轴)”。

简单的说，思路就是以不同的速度移动背景层（即，较远的层，移动得慢）。如果工作正常，它会有一个纵深视觉错觉，非常酷且容易做的效果。

此外，很多*shmups*（横版卷动游戏）使用一个或多个轴的卷动（除了最初的那个，[Space Invaders](http://en.wikipedia.org/wiki/Space_Invaders)）

让我们在Unity里实现它。

## 理论：定义我们游戏里的卷动

关于如果将卷动轴添加到游戏中，我们需要花一点时间思考。*这是一件在编码前非常好的事情。:)*

## 如何移动？

我们有下面的想法：

1. 第一个选择：主角和镜头移动，剩下对象固定不动。
2. 第二个选择：主角和镜头静止，level层做跑步机式运动。

如果有`透视镜头`，第一个选择非常容易，视差很明显：背景元素有更高的景深，因此，它们在后面且看上去移动得更慢。

但是在Unity的标准2D游戏里，我们使用`正交镜头`，并没有景深补尝。

> **关于镜头**：在我们的游戏中，记得将镜头对象的“Projection”属性设置为`Orthographic`.
>
> `Perspective(透视)` 是拥有景深的经典3D镜头
>
> `Orthographic(正交)` 表示所有东西都在同一面，它在GUI和2D游戏里特别有用

在我们的游戏里添加视差卷动效果，最好的方法是混合使用两种方法，我们有两种卷动方式：

- 主角和镜头向前移动
- 除开镜头的移动，背景元素还要以不同的速度移动

> **注**：你可能会问：“为什么不把镜头设置为主角对象的子对象呢？”。确实，在Unity里，如果将一个对象（镜头或其它）设置为一个对象的子对象，那么这个对象将处于其父对象的相对位置。所以，如果镜头是主角的子对象且在它的中心，它将会跟随主角移动。这样也许是可行的，但它并不是本次游戏的玩法。
>
> 在*shmup（横版卷轴游戏）*里，镜头会限制主角的移动，如果镜头随着主角在水平和垂直轴间移动，那主角可以移动到任何地方，而我们想让主角呆在一个限制区域里。
>
> 在2D游戏里，我们建议保持镜头的独立性，甚至在平台类游戏里，镜头同样不是始终跟随着主角：它在一定限制里跟随着。Super Mario World大概是镜头运用最好的平台类游戏。你可以看看它是怎么样的。

## 产出敌人

添加卷动会对我们的游戏产生影响，尤其是敌人们。现在，游戏一开始，它们会移动，射击。然而，我们希望它们听话的等着，直到该它们出现时。

如何生成敌人？这肯定依赖游戏，你可以在触发事件时产出敌人，产生数量，预定义地点等。

看看我们将该怎么做：我们直接将敌人(Poulpies)放置到场景里(通过拖拽`Prefab`到场景里)。默认情况下，它们是静止的，直到镜头触达，激活它们。

[![Camera usage](https://pixelnest.io/tutorials/2d-game-unity/parallax-scrolling/-img/camera_use.png)](https://pixelnest.io/tutorials/2d-game-unity/parallax-scrolling/-img/camera_use.png)

好事情是你可以使用Unity编辑器设置敌人们，不用做任何事情，你已经拥有了一个关卡编辑器。

**它是一个选择，但并不科学。:)**

> **注**：一个大的项目，你最好有一个专用的关卡编辑器，像"Tiled"或者自已自定义一个。你的关卡可以是文本文件（plain text, XML, JSON等），像你在Unity示例里看的那样。

## PLANES

首先，we must define what our planes are and for each, if it's a loop or not. 一个循环的背景关卡进行期间将不停的重复。如：像天空就特别的适用。

添加一个新层到场景里，做为背景元素，我们将得到：

| 层                                                    | 循环 |
| ----------------------------------------------------- | ---: |
| Background with the sky(天空背景)                     |  Yes |
| Background(第一组悬浮平台)                            |   No |
| Middleground(第二组悬浮平台)                          |   No |
| Foreground with players and enemies(主角和敌人的前景) |   No |
[![Planes](https://pixelnest.io/tutorials/2d-game-unity/parallax-scrolling/-img/planes.png)](https://pixelnest.io/tutorials/2d-game-unity/parallax-scrolling/-img/planes.png)

只要我们想，我们可添加很多层的背景。

> **小心**：